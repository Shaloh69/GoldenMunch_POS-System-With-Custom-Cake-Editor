# Server Environment Configuration Template

# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control!

# Application Environment
NODE_ENV=development
PORT=5000
HOST=localhost

# Database Configuration (MySQL)
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_database_password_here
DB_NAME=GoldenMunchPOS
# Set to 'true' for cloud databases that require SSL (Aiven, AWS RDS, etc.)
DB_SSL=false

# JWT Authentication Secrets
# IMPORTANT: Generate secure random strings for production!
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_jwt_secret_key_change_this
ADMIN_JWT_SECRET=your_admin_jwt_secret_change_this
CASHIER_JWT_SECRET=your_cashier_jwt_secret_change_this

# JWT Token Expiration
ADMIN_JWT_EXPIRES_IN=8h
CASHIER_JWT_EXPIRES_IN=12h

# CORS Configuration
# Multiple origins can be specified as comma-separated values
# Default: http://localhost:3000,http://localhost:3001,http://localhost:3002
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:3002

# Mobile Editor URL (for QR code generation)
# This is the URL where users will be directed when scanning QR codes for custom cake design
# The mobile editor is served as static files from the backend server
# In production, set this to the backend server's network IP (e.g., http://192.168.1.100:3001)
MOBILE_EDITOR_URL=http://localhost:3001
BACKEND_URL=http://localhost:3001

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# File Upload (in bytes - 10MB default)
MAX_FILE_SIZE=10485760

# Supabase Configuration (for image storage)
# Get these from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here

# Xendit Payment Gateway Configuration
# Get your API keys from: https://dashboard.xendit.co/settings/developers#api-keys
# TEST mode: use xnd_development_... key (safe for development/testing)
# LIVE mode: use xnd_production_... key (real payments)
XENDIT_SECRET_KEY=xnd_development_your_test_key_here

# API URL (for Xendit webhooks)
# In development: http://localhost:5000
# In production: your backend URL (e.g., https://your-backend.onrender.com)
API_URL=http://localhost:5000

# Logging
LOG_LEVEL=info

# Redis Configuration (for caching)
# Set to 'true' to enable Redis caching for improved performance
REDIS_ENABLED=true

# Option 1: Redis URL (Recommended for cloud providers like Render, Heroku, Redis Cloud)
# Format: redis://username:password@host:port or rediss://username:password@host:port (for TLS)
# Example: rediss://default:your_password@redis-12345.cloud.redislabs.com:12345
REDIS_URL=

# Option 2: Individual parameters (for local development or custom setup)
# Only used if REDIS_URL is not set
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_USERNAME=
REDIS_PASSWORD=
REDIS_TLS=false
# Redis database number (0-15)
REDIS_DB=0
# Default cache TTL in seconds (5 minutes)
REDIS_DEFAULT_TTL=300

# Email Configuration (for notifications)
# ⚠️  IMPORTANT: Many cloud platforms (Render, Vercel, Netlify) block SMTP ports on free tier
# ⚠️  Render free tier blocks ports 25, 465, 587 - emails will fail with ETIMEDOUT error
#
# Solutions:
# 1. Upgrade to Render paid instance ($7/month) - removes SMTP restriction
# 2. Use email API services (SendGrid, Mailgun, Postmark) - bypasses SMTP entirely
# 3. Switch to VPS hosting (DigitalOcean, Linode) - no SMTP restrictions
#
# SMTP Configuration - Use your email provider's SMTP settings
# For Gmail:
#   - Use port 465 with SSL (more reliable than 587)
#   - EMAIL_PASSWORD must be App Password (not regular password)
#   - Generate App Password: Google Account → Security → 2-Step Verification → App passwords
# For other providers: Check their SMTP documentation
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=465
EMAIL_SECURE=true
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_password_here
EMAIL_FROM_NAME=GoldenMunch POS

# Admin Email (receives notifications about new custom cake requests)
ADMIN_EMAIL=admin@goldenmunch.com

# Business Contact Information (shown in emails)
BUSINESS_PHONE=+1234567890
BUSINESS_ADDRESS=123 Main Street, City, Country
